/**
 * PREFER TAILWIND UTILITY CLASSES WHENEVER POSSIBLE, AVOID DIRECT CSS RULES
 *
 * Tailwind breakpoints Memo:
 * sm = 640px
 * md = 768px
 * lg = 1024px
 * xl = 1280px
 * 2xl = 1536px
**/

@import "tailwindcss";

@source '../../vendor/laravel/framework/src/Illuminate/Pagination/resources/views/*.blade.php';
@source '../../storage/framework/views/*.php';
@source '../**/*.blade.php';
@source '../**/*.js';

@theme {
    --font-sans:
        "Instrument Sans", ui-sans-serif, system-ui, sans-serif,
        "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
        "Noto Color Emoji";
}

/* =============================================================================
   NAVIGATION
   ============================================================================= */

nav {
    &.nav-main {
        @apply bg-white shadow-sm border-b border-gray-200;
    }

    .nav-container {
        /*@apply container mx-auto;*/
        @apply w-full px-4 sm:px-6 lg:px-8;
    }

    .nav-inner {
        @apply flex justify-between h-16 items-center;
    }

    .nav-branding {
        @apply flex items-center space-x-2 hover:opacity-80 transition-opacity;

        /*.logo {
        }*/

        .logo-img {
            @apply w-12 h-12 object-contain;
        }

        .app-title {
            @apply text-2xl font-semibold text-gray-900;
        }

        .badge-env {
            @apply text-xs font-semibold bg-yellow-400 text-yellow-900 px-2 py-1 rounded;

            /* Sur mobile: version plus compacte */
            @media (max-width: 767px) {
                @apply text-[0.6rem] px-1.5 py-0.5;
            }
        }
    }

    /* Hamburger button */
    .hamburger-button {
        @apply p-2 rounded-md text-gray-700 transition-colors order-last;

        /* Visible jusqu'au desktop complet */
        @media (min-width: 1024px) {
            @apply hidden;
        }

        svg {
            @apply w-6 h-6;
        }
    }

    /* Desktop menu */
    .main-menu {
        @apply hidden items-center space-x-1;

        /* Visible Ã  partir de tablet */
        @media (min-width: 768px) {
            @apply flex;
        }
    }

    /* Mobile menu (overlay) */
    .mobile-menu {
        @apply fixed inset-x-0 top-16 bg-white border-b border-gray-200 shadow-lg z-50 px-4 py-4 space-y-3;

        /* Visible jusqu'au desktop complet */
        @media (min-width: 1024px) {
            @apply hidden;
        }

        .menu-section {
            @apply border-t border-gray-200 pt-3 first:border-t-0 first:pt-0;

            /* Cacher la navigation principale sur tablet (elle est dans le main-menu) */
            &.main-nav {
                @media (min-width: 768px) and (max-width: 1023px) {
                    @apply hidden;
                }
            }

            .menu-title {
                @apply text-xs font-semibold text-gray-500 uppercase mb-2;
            }
        }
    }

    .nav-link {
        @apply text-sm font-medium text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md transition-colors;

        /* Mobile version in overlay */
        .mobile-menu & {
            @apply block w-full text-left;
        }

        /* Sur tablet: cacher dans main-menu si c'est dans mobile-menu */
        @media (min-width: 768px) and (max-width: 1023px) {
            .mobile-menu & {
                @apply hidden;
            }
        }
    }

    .nav-actions {
        @apply flex items-center space-x-4;

        /* Sur mobile: seulement date + hamburger */
        @media (max-width: 767px) {
            @apply space-x-3;

            .dropdown,
            .nav-login,
            .locale-switcher {
                @apply hidden;
            }
        }

        /* Sur tablet: cacher admin/user menus, garder locale */
        @media (min-width: 768px) and (max-width: 1023px) {
            .dropdown,
            .nav-login {
                @apply hidden;
            }
        }
    }

    .dropdown {
        @apply relative;

        /* Cacher sur mobile et tablet */
        @media (max-width: 1023px) {
            @apply hidden;
        }
    }

    .dropdown-button {
        @apply flex items-center space-x-1 text-sm text-gray-700 hover:text-gray-900 focus:outline-none;

        svg {
            @apply w-4 h-4;
        }
    }

    .dropdown-menu {
        @apply absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200;
    }

    .dropdown-item {
        @apply block px-4 py-2 text-sm text-gray-700;
    }

    .dropdown-item-button {
        @apply w-full text-left block px-4 py-2 text-sm text-gray-700;
    }

    .badge-admin,
    .badge-manage {
        /*@apply px-2 py-1 rounded;*/
        @apply bg-blue-100 text-blue-900 hover:opacity-75;
    }

    .nav-login {
        @apply text-sm text-blue-600 hover:text-blue-800 font-medium;
    }

    .nav-date {
        @apply text-sm text-gray-500;

        /* Sur mobile et tablet: format court avant hamburger */
        @media (max-width: 1023px) {
            @apply text-xs;
        }
    }

    .locale-switcher {
        @apply flex items-center space-x-1 border-l border-gray-300 pl-4;

        /* Cacher sur mobile (sera dans le menu hamburger) */
        @media (max-width: 767px) {
            @apply hidden;
        }

        /* Sur tablet: visible dans la nav */
        @media (min-width: 768px) and (max-width: 1023px) {
            @apply flex;
        }

        /* Dans le menu mobile */
        .mobile-menu & {
            @apply flex border-l-0 pl-0 justify-center;
        }
    }

    .locale-link {
        @apply text-xs px-2 py-1 rounded;

        &.active {
            @apply bg-blue-100 text-blue-800 font-semibold;
        }

        &:not(.active) {
            @apply text-gray-600;
        }
    }
}

.role-admin,
.role-super_admin {
    nav .badge-admin {
        @apply bg-red-100 text-red-800;
    }
}

/* =============================================================================
   MAIN SECTIONS
   ============================================================================= */

#main-area {
    header {
        h1,
        .page-title {
            @apply text-3xl font-bold text-gray-900;
        }
    }
}

footer {
    @apply w-full bg-gray-800 text-gray-300 p-4;

    > * {
        @apply container mx-auto;
    }
}

/**
 * Hide elements with the x-cloak attribute until Alpine.js is loaded.
 */
[x-cloak] {
    display: none !important;
}

.error {
    @apply text-red-600 text-sm mt-1;
}

.notices {
    @apply space-y-4 my-4 text-center;

    .notice {
        @apply p-2 items-center leading-none lg:rounded-full flex lg:inline-flex;
        @apply bg-gray-300 border border-gray-500;

        .tag {
            @apply flex rounded-full uppercase px-2 py-1 text-xs font-bold mr-3;
        }
        .message {
            @apply font-semibold mr-2 text-left flex-auto;
        }

        &.notice-error {
            @apply bg-red-100 border-red-500 border-2;
            .tag {
                @apply bg-red-500 text-white;
            }
        }

        &.notice-success {
            @apply bg-green-100 border-green-500 border-2;
            .tag {
                @apply bg-green-500 text-white;
            }
        }

        &.notice-warning {
            @apply bg-yellow-100 border-yellow-500 border-2;
            .tag {
                @apply bg-yellow-500 text-white;
            }
        }

        &.notice-info {
            @apply bg-blue-100 border-blue-500 border-2;
            .tag {
                @apply bg-blue-500 text-white;
            }
        }
    }
}

.card {
    @apply bg-white shadow-sm space-y-6 my-6;
    @apply md:rounded-lg;

    > * {
        @apply p-4;
    }

    .card-header {
        @apply bg-gray-300/75 px-4 py-2 m-0;
        @apply md:rounded-t-lg;
    }

    .card-body {
        @apply p-4;
    }

    .card-footer {
        @apply bg-gray-100 px-4 py-2;
        @apply md:rounded-b-lg;
    }

    h2 {
        @apply text-base/7 font-semibold text-gray-900;
    }
}

.mobile-hidden {
    @apply max-sm:hidden;
}
/*..sidebar .mobile-hidden {
    @apply hidden;
}*/

/* Hide mobile-hidden columns when container is smaller than Tailwind 'sm' (640px) */
@container (max-width: 640px) {
    .mobile-hidden {
        @apply hidden;
    }
}

.button-group {
    @apply flex gap-4;
}
