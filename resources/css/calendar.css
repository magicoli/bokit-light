@import "tailwindcss";

/* =============================================================================
   CALENDAR NAVIGATION
   ============================================================================= */

main {
    > * {
        @apply max-w-none;
    }
}

header {
    @apply hidden;
    background: lightgreen;
}

.text-mobile-only {
    @media (min-width: 640px) {
        @apply hidden;
    }
}

.text-desktop-only {
    @apply hidden;

    @media (min-width: 640px) {
        @apply inline;
    }
}

.calendar-nav {
    @apply bg-white rounded-lg shadow-sm border border-gray-200 p-2 mb-6;

    @media (min-width: 640px) {
        @apply p-4;
    }

    .nav-controls {
        @apply flex items-center justify-between gap-2;
    }

    .nav-left {
        @apply flex items-center gap-1;
    }

    .nav-button {
        @apply inline-flex items-center justify-center border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors;
        width: 2.5rem;
        height: 2.5rem;

        &:active {
            @apply bg-gray-200;
        }

        &.today {
            @apply border-2 border-blue-500 text-blue-600 hover:bg-blue-50;
            width: auto;
            padding: 0.5rem 0.5rem;

            @media (min-width: 640px) {
                padding: 0.5rem 0.75rem;
            }

            &:active {
                @apply bg-blue-100;
            }
        }

        &:disabled,
        &.disabled {
            @apply text-gray-400 bg-gray-100 cursor-not-allowed;
        }
    }

    .period {
        @apply flex flex-wrap justify-center items-baseline gap-x-2 mx-auto;

        h2 {
            @apply text-lg font-bold text-gray-900 truncate m-0 p-0;

            @media (min-width: 640px) {
                @apply text-2xl;
            }
        }

        .timezone,
        .week-info {
            @apply text-xs text-gray-500 m-0 p-0 truncate;
        }
    }

    .nav-right {
        @apply flex items-center gap-1;
    }
}

/* =============================================================================
   CALENDAR TABLE
   ============================================================================= */

.calendar-wrapper {
    @apply bg-white rounded-lg shadow-sm border border-gray-200 overflow-x-hidden;
}

.calendar-table-container {
    @apply inline-block min-w-full align-middle;
}

.calendar-table {
    @apply min-w-full divide-y divide-gray-200;
    table-layout: fixed;
}

/* =============================================================================
   TABLE HEADER
   ============================================================================= */

.calendar-header {
    @apply bg-gray-50 sticky top-0 z-10;

    .unit-column {
        @apply sticky left-0 z-20 bg-gray-50 px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider border-r-2 border-gray-300 min-w-[100px] w-[120px];

        @media (max-width: 639px) {
            @apply hidden;
        }
    }

    .day-column {
        @apply px-1 py-2 text-center min-w-[38px] border-r border-gray-200 relative;

        &.today {
            @apply bg-blue-50/50;
        }

        .day-name {
            @apply text-xs font-medium text-gray-700;
        }

        .day-number {
            @apply text-sm font-bold text-gray-900;

            &.today {
                @apply text-blue-600;
            }
        }
    }
}

/* =============================================================================
   TABLE BODY
   ============================================================================= */

.calendar-body {
    @apply bg-white divide-y divide-gray-200;
}

.property-row {
    @apply border-t-2 border-gray-300;

    &:not(.unit-row) {
        @apply bg-gray-300;
    }

    .property-name {
        @apply sticky left-0 z-10 bg-gray-200 px-4 py-2 border-r-2 border-gray-300 font-bold text-gray-800 text-sm;

        @media (max-width: 639px) {
            @apply hidden;
        }

        .timezone {
            @apply text-gray-500 text-xs font-normal;
        }
    }

    .property-spacer {
        @apply bg-gray-200 border-r border-gray-200;

        &.weekend {
            @apply bg-gray-200/50;
        }
    }
}

.unit-row {
    @apply hover:bg-gray-50 transition-colors;

    .unit-cell {
        @apply sticky left-0 z-10 bg-white px-4 py-3 border-r-2 border-gray-300 hover:bg-gray-50;

        @media (max-width: 639px) {
            @apply hidden;
        }
    }

    .unit-info {
        @apply flex items-center space-x-2;

        .unit-name {
            @apply font-medium text-gray-900 text-sm;
        }

        .timezone {
            @apply text-gray-500 text-xs font-normal;
        }
    }
}

/* =============================================================================
   DAY CELLS
   ============================================================================= */

.day-cell {
    @apply relative h-16 px-0 border-r border-gray-200;

    @media (max-width: 639px) {
        @apply h-20;
    }

    /* 3 niveaux de gris : pass√© (50) < weekend (100) */
    &.past {
        @apply bg-gray-100;
    }

    &.weekend {
        @apply bg-gray-200/75;
    }

    .unit-label-mobile {
        @apply absolute left-2 top-1 text-xs font-semibold z-20 px-1.5 py-0.5 rounded shadow-sm bg-black/75 text-white;

        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;

        @media (min-width: 640px) {
            @apply hidden;
        }

        .timezone {
            @apply text-gray-500 text-xs font-normal;
        }
    }

    .today-highlight {
        @apply absolute inset-0 bg-blue-200/50 pointer-events-none;
    }
}

/* =============================================================================
   BOOKING BLOCKS
   ============================================================================= */

.booking-block {
    @apply absolute rounded-xl text-white text-xs font-medium overflow-hidden hover:shadow-xl hover:opacity-100 transition-all flex items-center px-2 cursor-pointer z-10;

    .continues {
        @apply opacity-75 mr-1;
    }

    .guest-name {
        @apply truncate text-lg flex-2;
    }

    .extends {
        @apply opacity-75 ms-auto;
    }

    .status-badge {
        @apply font-bold text-xs bg-black/50 px-1 rounded;
    }
}

/* =============================================================================
   BOOKING MODAL
   ============================================================================= */

.booking-modal-backdrop {
    @apply fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50;
}

.booking-modal {
    @apply bg-white rounded-lg shadow-xl max-w-md w-full p-6;

    .modal-header {
        @apply flex justify-between items-start mb-4;

        h3 {
            @apply text-xl font-bold text-gray-900;

            .badge-deleted {
                @apply inline-block bg-red-600 text-white text-xs font-bold px-2 py-1 rounded mr-2;
            }
        }

        .close-button {
            @apply text-gray-400 hover:text-gray-600;

            svg {
                @apply w-6 h-6;
            }
        }
    }

    .modal-content {
        @apply space-y-3;
    }

    .field-row {
        @apply flex items-center justify-between;

        .unit-info {
            @apply flex items-center;

            .unit-name {
                @apply text-sm font-medium text-gray-900;
            }
        }

        .status-badge {
            @apply inline-flex items-center px-2 py-1 rounded text-white text-xs font-semibold;
        }
    }

    .dates-section {
        @apply border-t pt-3 grid grid-cols-3 gap-4;

        .date-field {
            label {
                @apply text-xs font-medium text-gray-500 uppercase block;
            }

            .value {
                @apply text-sm text-gray-900 font-semibold mt-1;
            }
        }
    }

    .detail-section {
        @apply border-t pt-3;

        .detail-line {
            @apply text-sm mb-1;

            .label {
                @apply font-medium text-gray-500;
            }

            .value {
                @apply text-gray-900 ml-2;
            }

            .link {
                @apply text-blue-600 hover:underline ml-2;
            }
        }
    }

    .source-section {
        @apply border-t pt-3;

        .source-line {
            @apply text-sm mb-1;

            .label {
                @apply font-medium text-gray-500;
            }

            .value {
                @apply text-gray-900 ml-2;
            }

            .link {
                @apply text-blue-600 hover:underline ml-2;
            }
        }
    }

    .comments-section {
        @apply border-t pt-3;

        label {
            @apply text-sm font-medium text-gray-500 block mb-2;
        }

        .comments-text {
            @apply text-sm text-gray-700 bg-gray-50 p-3 rounded whitespace-pre-wrap;
        }
    }
}
